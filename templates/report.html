<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Reporte de Departamento</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      /* === Variables CSS === */
      :root {
        --font-base: "Circular", "Helvetica Neue", Helvetica, Arial, sans-serif;
        --color-bg: #f7f7f7;
        --color-surface: #ffffff;
        --color-text: #484848;
        --color-muted: #767676;
        --color-accent: #ff5a5f;
        --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.1);
        --shadow-medium: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      /* === Global Reset & Base === */
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: var(--font-base);
        background: var(--color-bg);
        color: var(--color-text);
        line-height: 1.5;
        padding: 20px;
      }
      h1,
      h2,
      h3 {
        color: var(--color-text);
      }

      a {
        color: var(--color-accent);
        text-decoration: none;
      }

      /* === Header === */
      header {
        background: var(--color-surface);
        padding: 30px 20px;
        text-align: center;
        border-radius: 8px;
        box-shadow: var(--shadow-light);
        margin-bottom: 40px;
      }
      header .logo {
        margin: 0 auto 15px;
      }
      header h1 {
        font-size: 28px;
        margin-bottom: 8px;
      }
      header .meta {
        font-size: 14px;
        color: var(--color-muted);
      }

      /* === Stat boxes === */
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 20px;
        margin-bottom: 40px;
      }
      .stat-box {
        background: var(--color-surface);
        border-radius: 8px;
        padding: 20px;
        box-shadow: var(--shadow-light);
        text-align: center;
      }
      .stat-box h2 {
        font-size: 24px;
        color: var(--color-accent);
        margin-bottom: 5px;
      }
      .stat-box p {
        font-size: 13px;
        color: var(--color-muted);
        text-transform: uppercase;
        letter-spacing: 0.02em;
      }

      /* === Table styling === */
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        background: var(--color-surface);
        border-radius: 8px;
        overflow: hidden;
        box-shadow: var(--shadow-light);
      }
      thead {
        background: var(--color-bg);
      }
      th,
      td {
        padding: 12px 15px;
        text-align: left;
        font-size: 14px;
      }
      th {
        color: var(--color-muted);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.03em;
        border-bottom: 1px solid #eaeaea;
      }
      tbody tr:hover {
        background: #fafafa;
      }
      tbody td {
        border-bottom: 1px solid #f0f0f0;
      }
      tfoot td {
        padding: 14px 15px;
        font-weight: 600;
        background: var(--color-bg);
      }

      /* === Footer === */
      footer {
        text-align: center;
        font-size: 12px;
        color: var(--color-muted);
        margin-top: 50px;
      }
      @media print {
        /* Mantén thead como header-group para que repita sí si quieres, pero…
     Impide que tfoot sea tratado como pie de página repetido: */
        tfoot {
          display: table-row-group !important;
        }
        /* (Opcional) Controlar quiebres dentro de filas */
        tbody {
          page-break-inside: auto;
        }
        tr {
          page-break-inside: avoid;
          page-break-after: auto;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <!-- Logo SVG -->
      <div class="logo">
        <svg
          width="301"
          height="90"
          viewBox="0 0 301 90"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M83.9954 85.0072L54.3956 4.27159C53.1805 1.4495 51.8364 0.100169 48.8904 0.094513L35.97 0.0697077C32.9819 0.063971 31.5064 1.40789 30.4488 4.22562L0.370894 84.8467C-0.305549 86.4446 -0.309657 88.591 2.67844 88.5967L16.8193 88.6239C19.7653 88.6295 20.861 87.832 21.9194 84.5934L25.7276 73.953L58.7228 74.0163L62.448 84.6712C63.536 87.9139 64.6287 88.7157 67.5747 88.7213L81.7156 88.7485C84.6616 88.7541 84.6657 86.6078 83.9954 85.0072ZM32.2029 55.1109L42.3606 25.3756L52.4041 55.1497L32.2029 55.1109Z"
            fill="#545454"
          />
          <path
            d="M150.149 0.288023L120.015 0.230171C116.901 0.224191 116.099 1.69566 116.094 4.09455L115.939 84.8993C115.934 87.3403 116.731 88.8148 119.845 88.8208L149.979 88.8786C166.013 88.9094 186.232 79.8156 186.273 58.6464L186.327 30.6594C186.367 9.61647 166.184 0.318807 150.149 0.288023ZM165.149 56.712C165.133 65.3396 158.937 70.1676 150.015 70.1505L137.094 70.1257L137.193 18.9493L150.113 18.9741C159.035 18.9912 165.212 24.0113 165.196 32.4706L165.149 56.712Z"
            fill="#545454"
          />
          <path
            d="M299.643 85.4223L270.001 4.68663C268.828 1.86462 267.484 0.515289 264.496 0.509552L251.575 0.484747C248.629 0.479091 247.112 1.82293 246.054 4.64066L215.976 85.2617C215.3 86.8597 215.296 89.006 218.284 89.0118L232.425 89.0389C235.371 89.0446 236.466 88.247 237.525 85.0085L241.333 74.368L274.328 74.4314L278.095 85.0864C279.141 88.329 280.234 89.1307 283.18 89.1364L297.321 89.1635C300.309 89.1692 300.313 87.0229 299.643 85.4223ZM247.85 55.526L258.008 25.7908L268.052 55.5648L247.85 55.526Z"
            fill="#545454"
          />
        </svg>
      </div>
      <h1>Reporte de Departamento</h1>
      <div class="meta">
        Dueño: {{nombreDueno}} <br />Fecha de reporte: {{fechaReporte}}
      </div>
    </header>

    <!-- Estadísticas clave -->
    <div class="stats">
      <div class="stat-box">
        <h2>{{huespedesRecibidos}}</h2>
        <p>Huéspedes recibidos</p>
      </div>
      <div class="stat-box">
        <h2>{{nochesReservadas}}</h2>
        <p>Noches reservadas</p>
      </div>
      <div class="stat-box">
        <h2>{{promedioNoches}}</h2>
        <p>Promedio noches/estadia</p>
      </div>
      <div class="stat-box">
        <h2>${{gananciaNetaTotal}}</h2>
        <p>Ganancia Neta</p>
      </div>
      <div class="stat-box">
        <h2>${{ComisionAirbnbTotal}}</h2>
        <p>Comisión Airbnb</p>
      </div>

      <div class="stat-box">
        <h2>{{puntuacionAirbnb}}</h2>
        <p>Puntuación de Departamento</p>
      </div>
    </div>

    <!-- Tabla de reservas -->
    <table>
      <thead>
        <tr>
          <th>Reserva</th>
          <th>Fecha</th>
          <th>Noches</th>
          <th>Cobro Neto</th>
          <th>Comisión Airbnb</th>
        </tr>
      </thead>
      <tbody>
        {{#each rows}}
        <tr>
          <td>{{Reserva}}</td>
          <td>{{Fecha}}</td>
          <td>{{Noches}}</td>
          <td>${{CobroNeto}}</td>
          <td>${{ComisionAirbnb}}</td>
        </tr>
        {{/each}}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="2">Totales</td>
          <td>{{nochesReservadas}}</td>
          <td>${{gananciaNetaTotal}}</td>
          <td>${{ComisionAirbnbTotal}}</td>
        </tr>
      </tfoot>
    </table>

    <footer>&copy; ADA · {{fechaReporte}}</footer>
  </body>
</html>
